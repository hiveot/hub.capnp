# Example hub configuration

# Message bus configuration, paths are relative to application home
messenger:
  address: "localhost"
  clientPortMqtt: 8883 # TLS MQTT client port
  clientPortWS: 8884 # TLS Websocket port
  pluginPortMqtt: 9883 # TLS MQTT plugin port. Requires client cert
  pluginPortWS: 9884 # TLS Websocket plugin port. Requires client cert

# Logging
logging:
  #logFile: "./logs/hub.log" # relative to the application home
  logLevel: "info" # debug, info, warning, error. Default is warning

#Folders are relative to the app home directory
#configFolder: "../config"
#certsFolder: "./certs"

# Plugin to start
plugins:
  # Core plugins
  - mosquitto-pb # Launch the mosquitto server and manage mosquitto auth
  - dnssd-pb # DNS-SD local discovery of services
  - idprov-pb # Automated provisioning of Things
  # Other plugins
  - logger # Log discovered Things
  - owserver-pb # Publish 1-wire Things connected to a OWServer-V2 gateway

# Message bus client roles and addresses
# Just concept at this stage
# These permissions applies to the groups the thing and client share
# Protocol bindings publishing on the message bus will be subject to these ACLs.
# No errors
roles:
  - observe:
      - read: things/+/td
      - read: things/+/values
      - read: things/+/events
  - control:
      - read: things/+/td
      - read: things/+/values
      - read: things/+/events
      - write: things/+/actions
  - manage:
      - read: things/+/td
      - read: things/+/values
      - read: things/+/events
      - write: things/+/actions
      - write: things/+/config
  - thing: # a thing is a client that accesses only on its own IDs
      - write: things/+/td
      - write: things/+/values
      - write: things/+/events
      - read: things/+/actions
      - read: things/+/config

# Predefined clients in addition to plugins
clients:
  - default:
      groups: office
      roles: observe
  - user1:
      groups: office, home
      roles: control
  - thing1:
      groups: home
      roles: thing

# Groups of things and their consumers
group:
  home:
  office:
  factory:
