# Example hub configuration

# Message bus configuration, paths are relative to application home
#mqttAddress: "" # IP or hostname of message bus. Defaults to outbound interface address
#mqttCertPort: 8883 # certificate based auth over MQTT/TLS, default 8883
#mqttUnpwPortWS: 8884 # username password auth over WebSocket/TLS, default 8884
mqttTimeout: 3 # Mqtt connection timeout

# Logging
logFile: "./logs/hub.log" # relative to the application home
#logLevel: "warning" # debug, info, warning, error. Default is warning

#Folders are relative to the app home directory
#configFolder: "../config"
#certsFolder: "./certs"

# Plugin to start
plugins:
  # Core plugins
  - mosquittomgr # Launch the mosquitto server and manage mosquitto auth
  - idprov-pb # Automated provisioning of devices
  # Other plugins
  - logger # Log discovered Things
  - owserver-pb # Publish 1-wire Things connected to a OWServer-V2 gateway

# Message bus client roles and addresses
# Just concept at this stage
# These permissions applies to the groups the thing and client share
# Protocol bindings publishing on the message bus will be subject to these ACLs.
# No errors
roles:
  - observe:
      - read: things/+/td
      - read: things/+/values
      - read: things/+/events
  - control:
      - read: things/+/td
      - read: things/+/values
      - read: things/+/events
      - write: things/+/actions
  - manage:
      - read: things/+/td
      - read: things/+/values
      - read: things/+/events
      - write: things/+/actions
      - write: things/+/config
  - thing: # a thing is a client that accesses only on its own IDs
      - write: things/+/td
      - write: things/+/values
      - write: things/+/events
      - read: things/+/actions
      - read: things/+/config

# Predefined clients in addition to plugins
clients:
  - default:
      groups: office
      roles: observe
  - user1:
      groups: office, home
      roles: control
  - thing1:
      groups: home
      roles: thing

# Groups of things and their consumers
group:
  home:
  office:
  factory:
